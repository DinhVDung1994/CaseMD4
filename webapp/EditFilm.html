
<html>
<head>
    <title>$Title$</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
            integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
            integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="FileJS/changimg.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .product {
            float: left;
            margin-left: 40px;
        }
    </style>
</head>
<body>
<div style="width: 100%;position: fixed;float: top">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop1" data-toggle="dropdown">
                        Phim Lẻ
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Phim Lẻ 2015</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2016</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2017</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2018</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2019</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2020</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2021</a>
                        <a class="dropdown-item" href="#">Phim Lẻ 2022</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop2" data-toggle="dropdown">
                        Phim Bộ
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Anime</a>
                        <a class="dropdown-item" href="#">Phim Bộ Hàng Quốc</a>
                        <a class="dropdown-item" href="#">Phim Bộ Mỹ</a>
                        <a class="dropdown-item" href="#">Phim Bộ Asanzo ando</a>
                        <a class="dropdown-item" href="#">Phim Bộ Melody Mask</a>
                        <a class="dropdown-item" href="#">Phim Bộ Siêu Anh Hùng</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop3" data-toggle="dropdown">
                        Thể Loại
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Phim Khoa Học</a>
                        <a class="dropdown-item" href="#">Phim Viễn Tưởng</a>
                        <a class="dropdown-item" href="#">Phim 2 Người</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbardrop4" data-toggle="dropdown">
                        Quốc Gia
                    </a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">USA</a>
                        <a class="dropdown-item" href="#">JAVan</a>
                        <a class="dropdown-item" href="#">Thái Lan</a>
                        <a class="dropdown-item" href="#">Đông Lào</a>
                        <a class="dropdown-item" href="#">Việt Nam</a>
                        <a class="dropdown-item" href="#">Capuchia</a>
                    </div>
                </li>
            </ul>
            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            <div style="margin: 15px"><a href="/login.html">Đăng Nhập</a></div>

        </div>
    </nav>
</div>
<div style="height: 1500px">
    <div><img id="picture" src="imgWeb/imgbaner/img1.jpg" width="100%" height="450px"></div>
    <div>
        <div id="left" style="width: 70%;height: 1050px;background-color: greenyellow; float: left">
            <div align="center">
                        <table id="table-edit">

                        </table>

            </div>


        </div>
        <div id="right" style="width: 30%;height: 550px;background-color: orange;float: left;border-radius: 10%">
            <div><img src="imgWeb/logo/phimlehot.png" style="width: 100%" height="130px"></div>
        </div>
        <div id="right1" style="width: 30%;height: 500px;background-color: orange;float: left;border-radius: 10%">
            <div><img src="imgWeb/logo/phimbohot.png" style="width: 100%" height="130px"></div>
        </div>
    </div>
</div>


<div style="margin-left: 40%; float: bottom">
    <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a></li>
    </ul>
</div>
<div>
    <hr>
</div>
<div>
    <div id="footer">
        <p class="foodters">
            Đ/c: Số 23 Lô TT01 Đường Xanh Đỏ Tím Vàng Nháy Nháy , P. Thanh Lâu, Q. Bốn Đình, TP. Hà Nội<br>
            ĐT: 01692698618 - Fax: 0392 698 618<br>
        </p>
    </div>
</div>
</body>
<script>
    function getParam() {
        var url = new URL(window.location.href);
        console.log('url:', url);
        var id = url.searchParams.get("id");
        console.log('id:', id);
        return id;
    }
    getParam()
    function showDetails() {
        let id = getParam();
        $.ajax({
            type: "GET",
            url: `http://localhost:8080/movie/details/${id}`,
            success: function (data) {
                let str = "";
                str += `<tr>
                                <td> <label>Ten Film</label></td>
                                <td><input value="${data.nameFilm}" type="text" name="nameFilm" id="nameFilm"></td>
                </tr>`
                str += `<tr>
                                <td><label>Anh Bo Phim</label></td>
                                <td>   <input value="${data.imgFilm}"" type="text" name="anhFilm" id="anhFilm"></td>
                </tr>`
                str += `<tr>
                                <td><label>Loai Phim </label></td>
                                <td> <input value="${data.loaiPhim}" type="text" name="typeFilm" id="typeFilm"></td>
                </tr>`
                str += `<tr>
                                <td><label>Nam San Xuat </label></td>
                                <td>    <input value="${data.year}" type="text" name="year" id="year"></td>
                </tr>`
                str += `<tr>
                                <td><label>Dao Dien </label></td>
                                <td>    <input value="${data.directors}" type="text" name="daodien" id="daodien"></td>
                </tr>`
                str += `<tr>
                                <td><label>Hinh Thuc Chieu </label></td>
                                <td>    <input value="${data.cachChieu}" type="text" name="cachchieu" id="cachchieu"></td>
                </tr>`
                str += `  <button id="btn-edit" style="background-color: yellow;border: 1px solid black;border-radius: 10%">Save</button>`
                document.getElementById("table-edit").innerHTML = str;
            }
        })
    }
    showDetails();

    $(document).ready(function (){
        let id = getParam()
        let signInForm = {};
        $('#btn-edit').click(function (){
            signInForm.nameFilm = $('#nameFilm').val();
            signInForm.imgFilm = $('#anhFilm').val();
            signInForm.typeFilm = $('#typeFilm').val();
            signInForm.year = $('#year').val();
            signInForm.directors = $('#daodien').val();
            signInForm.cachChieu = $('#cachchieu').val();
            let signInFormOBJ = JSON.stringify(signInForm);
            console.log('signINFormOBJ ==',signInFormOBJ)
            $.ajax({
                async: false,
                type: "PUT",
                url: `http://localhost:8080/movie/savefiml/${id}`,
                data: signInFormOBJ,
                contentType: 'application/json; charset=utf8',
                //xử lý khi thành công
                success: function (data) {
                    alert('Successfull!')

                    window.location.href = '/webapp/showallfiml.html';
                }
            })
        })
    })
</script>
</html>
